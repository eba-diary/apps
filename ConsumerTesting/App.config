<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    <sectionGroup name="sentrySettings">
      <section name="EnvironmentSettings" type="Sentry.Configuration.EnvironmentSettingsSectionHandler,Sentry.Configuration" />
    </sectionGroup>
  </configSections>
  <!-- log4net settings -->
  <log4net threshold="ALL">
    <logger name="Sentry.LoggerDev">
      <level value="DEBUG" />
      <appender-ref ref="RollingLogFileAppenderLocal" />
      <!--You can uncomment the SELAppenderLocal appender below to test that it is working,
      but you will still want to use the file appender for local development-->
      <!--<appender-ref ref="SELAppenderLocal" />-->
    </logger>
    <logger name="Sentry.LoggerTest">
      <level value="DEBUG" />
      <appender-ref ref="SELAppenderServer" />
    </logger>
    <logger name="Sentry.LoggerQual">
      <level value="INFO" />
      <appender-ref ref="SELAppenderServer" />
    </logger>
    <logger name="Sentry.LoggerProd">
      <level value="INFO" />
      <appender-ref ref="SELAppenderServer" />
    </logger>
    <root>
      <level value="OFF" />
    </root>
    <!-- Local Appenders -->
    <appender name="RollingLogFileAppenderLocal" type="log4net.Appender.RollingFileAppender">
      <file type="log4net.Util.PatternString">
        <conversionPattern value="C:\\Temp\\ConsumerTesting.log" />
      </file>
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="20MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%-23date [%-5thread] %-5level %message%newline" />
      </layout>
    </appender>
    <appender name="SELAppenderLocal" type="Sentry.Common.LogAppenders.WebApplicationAppender, Sentry.Common">
      <file value="This is not used" />
      <applicationName value="ConsumerTesting" />
      <logFileName value="ConsumerTesting.log" />
      <logFolderFilePath value="C:\\Temp" />
      <environmentName value="Sentry.Configuration.EnvironmentName, Sentry.Configuration" />
    </appender>
    <!-- Server Appender -->
    <appender name="SELAppenderServer" type="Sentry.Common.LogAppenders.WebApplicationAppender, Sentry.Common">
      <file value="This is not used" />
      <applicationName value="ConsumerTesting" />
      <logFileName value="ConsumerTesting.log" />
      <logFolderFilePath value="${LogPath}" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <environmentName value="Sentry.Configuration.EnvironmentName, Sentry.Configuration" />
    </appender>
  </log4net>
  <!-- Sentry.Configuration settings -->
  <sentrySettings>
    <EnvironmentSettings defaultDomain="sentry.com" xmlns="urn:Sentry.Configuration">
      <!-- If you have a shared "defaultSettings" config file, import it here -->
      <!-- <importSettings path="defaultSettings.config" /> -->
      <defaultEnvironmentList>
        <env name="Dev">
          <webHost nameRegex=".*" />
          <machine nameRegex=".*" />
        </env>
      </defaultEnvironmentList>
      <config key="AppLogger">
        <settingList>
          <setting name="Dev" value="Sentry.LoggerDev" />
          <setting name="Test" value="Sentry.LoggerTest" />
          <setting name="Qual" value="Sentry.LoggerQual" />
          <setting name="Prod" value="Sentry.LoggerProd" />
        </settingList>
      </config>
    </EnvironmentSettings>
  </sentrySettings>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="log4net" publicKeyToken="669e0ddf0bb1aa2a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.8.0" newVersion="2.0.8.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-12.0.0.0" newVersion="12.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration>
