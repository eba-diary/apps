@model AuditSelectionModel
@{
    ViewBag.Title = "_AdminTest";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div>
    <h1>General Rawquery/Parquet Audit</h1>
</div>


<div class="row">
    <div class="d-inline-block col">
        <h3>Datasets</h3>
        <div class="md-form">
            @Html.DropDownListFor(m => m.AllDatasets,
                                  new SelectList(Model.AllDatasets, "Value", "Text"),
                                  new
                                  {
                                      @class = "active admin-audit-dropdown",
                                      @style = "display: none",
                                      @searchable = "Search Available Datasets"
                                  })
        </div>

    </div>
    <!-- Schema Dropdown Menu-->
    <div class="d-inline-block col">
        <h3>Schema</h3>
        <div class="md-form">
            <select class="mbd-select active admin-audit-dropdown" data-stop-refresh='true' id="AllSchemas" style="display: none">
                <option value="-1">Please Select a Schema</option>
                <!--populated asyncronously via ajax-->
            </select>
        </div>
    </div>

    <div class="d-inline-block active col-lg">
        <!-- Data Set Dropdown Menu-->
        <h3>Audit Type</h3>

        <div class="md-form">
            @Html.DropDownListFor(m => m.AllAuditTypes,
                                  new SelectList(Model.AllAuditTypes, "Value", "Text"),
                                  new
                                  {
                                      @class = "active admin-audit-dropdown",
                                      @style = "display: none",
                                      @searchable = "Search Available Audit Types"
                                  })

        </div>
    </div>
</div>
<div class="row">
    <div class="d-inline-block col-md-4">
        <!-- Data Set Dropdown Menu-->
        <h3>Search Types</h3>

        <div class="md-form">
            @Html.DropDownListFor(m => m.AllAuditSearchTypes,
                                  new SelectList(Model.AllAuditSearchTypes, "Value", "Text"),
                                  new
                                  {
                                      @class = "active admin-audit-dropdown",
                                      @style = "display: none",
                                      @searchable = "Search Available Search Types"
                                  })
        </div>
    </div>

    <div id="audit-selection-0" class="audit-search-selection hidden col-md-4">
        <h3>Date</h3>
        <div class="md-form">
            @Html.TextBoxFor(x => x.CurrentDate, "{0:yyyy-MM-dd}", new
                       {
                           @class = "admin-audit-dropdown form-control",
                           required = "required",
                           @type = "date",
                           @id = "datetime-picker"
                       })
        </div>
    </div>

    <div id="audit-selection-1" class="audit-search-selection hidden col-md-4">
        <h3>File Select</h3>
        <div class="md-form">
            <select class="mbd-select admin-audit-dropdown " searchable="Search Available Files" data-stop-refresh='true' id="fileDropdown" style="display: none">
                <option value="0">All Files</option>
                <!--populated asyncronously via ajax-->
            </select>
        </div>
    </div>
</div>
<div class="row">
    <div class="d-inline-block col">
        <button type="button" class="btn btn-primary waves-effect waves-light" id="auditSearchButton" disabled>Search</button>
    </div>
</div>


<br />
<br />
<br />

<!-- Spinner -->
<div class="text-center" id="tab-spinner">
    <div class="preloader-wrapper big active">
        <div class="spinner-layer spinner-blue-only">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle">
                </div>
            </div>

        </div>
    </div>
</div>



<!--Table-->
<div id="AuditResultTable"></div>

<script>
    $(document).ready(function () {
        data.Admin.AuditInit();
        $("#tab-spinner").hide();
        $('select.admin-audit-dropdown.active option[value=-1]').each(function () {
            $(this).prop('disabled', true);
        });
    });
</script>