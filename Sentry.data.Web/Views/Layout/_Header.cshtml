@model HeaderModel

<nav class="navbar navbar-default navbar-fixed-top sentry-navbar" role="navigation">
    <header class="sentry-header">
        <a href="/"><div class="sentry-logo"></div></a>
        <div class="sentry-app-title">
            <h1>
                data.sentry.com
            </h1>
            <h2>
                Sentry Data Assets - Information and Metadata
            </h2>
        </div>
        @{if (Model.EnvironmentName != "Prod") {
            <div class="sentry-environment">
                <span class="sentry-environment-name">@Model.EnvironmentName.ToUpper()</span>
            </div>
            }
        }
        <!-- User Menu -->
        <div class="dropdown sentry-user-dropdown">
            <div class="dropdown-toggle sentry-user" data-toggle="dropdown">
                @{if (Model.IsImpersonating)
                    {
                        <span class="glyphicon glyphicon-user text-info"></span>
                    }
                    else
                    {
                        //<span class="glyphicon glyphicon-user"></span>
                    <span><img src="@Model.AssociatePhotoUrl"/></span>
                    }
                }
                <span class="sentry-user-name">@Model.CurrentUserName</span>
            </div>
            @if (Model.IsImpersonating || Model.CanUserSwitch)
            {
                <ul class="dropdown-menu pull-right" role="menu">
                    @{if (Model.IsImpersonating)
                        {
                            <li role="presentation"><a role="menuitem" tabindex="-1" id="restoreUser" href="#">Switch back to @Model.RealUserName</a></li>
                        }
                    }
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Profile</a></li>
                    @{if (Model.CanUserSwitch)
                        {
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="@Url.Action("Switch", "User")">User Switch</a></li>
                        }
                    }
                    <li role="presentation" class="divider"></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Logout</a></li>
                </ul>
            }
        </div>
    </header>

    <!-- Main Menu -->

    @*@if (Model.HasMenu)
    {*@
        <div class="container-fluid menu">
            <div class="navbar-header">
                <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="navbar-collapse collapse" id="navbar-main">
                <ul class="nav navbar-nav text-right">
                    @if (Model.CanViewDataAsset)
                    {
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Data Assets <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li class="dropdown-submenu">
                                    <a data-toggle="dropdown">Assets </a>
                                    <ul class="dropdown-menu">
                                        @foreach (Sentry.data.Core.DataAsset da in ViewBag.DataAssets)
                                        {
                                            <li class="text-right"><a href="/DataAsset/@da.Name">@da.DisplayName</a></li>
                                        }
                                    </ul>
                                </li>
                                @if (Model.CanManageAssetAlerts)
                                {
                                    <li class="divider"></li>
                                    <li class="dropdown-header">Asset Administration</li>
                                    if (Model.CanManageAssetAlerts)
                                    {
                                        <li><a href="/DataAsset/ManageAssetNotification">Manage Alerts</a></li>
                                    }
                                }
                            </ul>
                        </li>
                    }
                    
                    @if (Model.CanManageConfigs || Model.CanEditDataset || Model.CanUpload)
                    {
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Datasets<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                @if (Model.CanEditDataset)
                                {
                                    <li><a href="#" onclick="data.Dataset.ViewUpload()">Create Dataset</a></li>
                                }
                                @if (Model.CanUpload)
                                {
                                    <li><a href="#" onclick="data.DatasetDetail.UploadFileModal(0)">Upload Data File</a></li>
                                }
                                
                                @{
                                    if (Model.CanManageConfigs)
                                    {
                                        <li class="divider"></li>
                                        <li class="dropdown-header">Dataset Administration</li>
                                        if (Model.CanManageConfigs)
                                        {
                                            <li><a href="/Dataset/EditDataFileConfig">Manage Configs</a></li>
                                        }
                                    }
                                }
                            </ul>
                        </li>
                    }
                    
                    <li class="visible-xs"><a href="#">About</a></li>
                </ul>
                @*<ul class="nav navbar-nav navbar-right text-right about hidden-xs">
                    <li class=""><a href="#">About</a></li>
                </ul>*@
            </div>
        </div>
    @*}*@

    <!--  hide the entire menu / search bar div... uncomment all this to add the menu back in and etc...
    @{if (Model.CanUseApp)
        {
        <div class="container-fluid">
        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
            <ul class="nav navbar-nav">
                @* ###  BEGIN Sentry.Data  A### - Code below is Sentry.Data-specific *@
                <li>@Html.ActionLink("Click Here to Enter a Defect", "Create", "Defect")</li>
                <li>@Html.ActionLink("Datasets", "Index", "Dataset")</li>
                @*TODO: Add security around admin menu*@
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        Admin <span class="badge badge-warning" id="adminBadge"></span><b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        @if (Model.CanApproveAssets)
                        {
                        <li>
                            <a href="@Url.Action("Approve", "Admin")">Approve Assets <span class="badge badge-warning" id="approveBadge"></span></a>
                        </li>
                        }
                        <li><a href="@Url.Action("Complete","Admin")">Complete Auctions <span class="badge badge-warning" id="completeBadge"></span></a></li>
                        <li>@Html.ActionLink("Manage Users", "ManageUsers", "Admin")</li>
                        <li>@Html.ActionLink("Manage Categories", "Index", "Category")</li>
                        <li>@Html.ActionLink("Error Tester", "Index", "Error")</li>
                        <li><a onclick="data._Layout.showRefreshDemoDataConfirmation();" href="#">Refresh Demo Data</a></li>
                        <li class="dropdown-submenu">
                            <a data-toggle="dropdown">Demo of submenu</a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Do Stuff</a></li>
                                <li><a href="#">Other things</a></li>
                                <li><a href="#">Solve world hunger</a></li>
                                <li class="dropdown-submenu">
                                    <a data-toggle="dropdown">Down the rabbit hole</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="#">Do you really think</a></li>
                                        <li><a href="#">you can find something</a></li>
                                        <li><a href="#">interesting down here?</a></li>
                                        <li class="dropdown-submenu">
                                            <a data-toggle="dropdown">Yes, I do</a>
                                            <ul class="dropdown-menu">
                                                <li><a href="#">Just give up already</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>

                </li>
                @* ###  END Sentry.Data  ### - Code above is Sentry.Data-specific *@
            </ul>

            <form class="navbar-form navbar-right" id="SearchForm">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                    <input type="text" id="SearchText" class="form-control" placeholder="What would you like to do today?" />
                </div>
            </form>

        </div>
    </div>
        }
    }

-->

</nav>
