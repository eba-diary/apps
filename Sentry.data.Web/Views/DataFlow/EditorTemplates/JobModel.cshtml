@model Sentry.data.Web.JobModel
@*@using (Html.BeginCollectionItem("RetrieverJob"))
{*@

    <h4>Where Do You Want Us to Pull From?</h4>
    
    <div class="md-form">
        @Html.LabelFor((model) => model.SelectedSourceType, new { @class = "mdb-main-label" })
            @Html.DropDownListFor((model) => model.SelectedSourceType, Model.SourceTypesDropdown, new { @class = "mdb-select" })
            @Html.ValidationMessageFor((model) => model.SelectedSourceType, "", new { @class = "text-danger" })
    </div>

    <div class="md-form">
        @Html.LabelFor((model) => model.SelectedDataSource, new { @class = "control-label col-md-2" })
        <div class="" data-toggle="tooltip" data-placement="right" title="If the required data source does not exist, please contact DSCSupport@sentry.com for assistance.">
            @Html.DropDownListFor((model) => model.SelectedDataSource, Model.SourcesForDropdown, new { @class = "form-control edit-dataset-row"})
            @Html.ValidationMessageFor((model) => model.SelectedDataSource, "", new { @class = "text-danger" })
        </div>
        <div class="securityPanel" style="display:none;">
            <div class="md-form">
                <span class="glyphicon glyphicon-lock lockIcon" data-toggle="tooltip" data-placement="top" title="Secure"></span>
            </div>
                <span>
                    <input id="RequestAccessButton" type="button" value="Request Access" class="btn btn-primary"
                           data-toggle="tooltip" data-placement="top" title="Request Access to Data Source" />
                </span>
        </div>
    </div>
    <br />
    <div class="dataSourceInfoPanel col-md-12" style="display:none;">
        <div class="form-group col-md-12">
            <label class="col-md-offset-2 col-md-1">Owner:</label>
            <div class="col-md-2" id="primaryOwner"></div>
            <label class="col-md-1">Contact:</label>
            <div class="col-md-2" id="primaryContact"><a id="dataSourceContactEmail" href=""></a></div>
        </div>
    </div>

    <div class="form-group fieldDescription col-md-12">
        <label class="control-label col-md-2"></label>
        <div class="col-md-10">
            <span class="text-muted">
                <em id="dataSourceDescription"></em>
            </span>
        </div>
    </div>

    <div class="form-group editDataSourceLink col-md-12" style="display:none;">
        <label class="control-label col-md-2"></label>
        <div class="col-md-10">
            <a id="editDataSource" class="backToList" href="/Config/Source/Edit"><span class="glyphicon glyphicon-chevron-right"></span>Edit Data Source</a>
        </div>
    </div>

    @*@if (Model.Security.CanCreateDataSource)
        {
            <div class="form-group">
                <label class="control-label col-md-2"></label>
                <div class="col-md-10">
                    <a class="backToList" href="/Config/Source/Create"><span class="glyphicon glyphicon-plus"></span>Create new Data Source</a>
                </div>
            </div>
        }*@

    <div class="questionairePanel" style="display:none">
        @*<hr />
            <h3>Job Configuration</h3>
            <hr />*@

        <div class="jobquestion sourceLocation">
            <div class="form-group configQuestion">
                <div class="col-md-12">
                    <h5>Where will we find the data?</h5>
                </div>
            </div>

            <div class="form-group col-md-12 questionDescription">
                <span class="text-muted">
                    <em id="baseURL"></em>
                </span>
            </div>

            <div class="form-group col-md-12">
                @Html.LabelFor(model => model.RelativeUri, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    <input type="text" id="baseURLTextBox" readonly="readonly" disabled="disabled" class="form-control edit-dataset-row col-md-4" style="width:40% ;" />
                    @Html.TextBoxFor(model => model.RelativeUri, new { @class = "form-control edit-dataset-row col-md-6", @style = "width:60%;", @placeholder = "Do not include starting forward slash (/)" })
                    @Html.ValidationMessageFor(model => model.RelativeUri, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="httpSourcePanel" style="display:none;">

                <div class="form-group col-md-12">
                    @Html.LabelFor(model => model.SelectedRequestMethod, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-3">
                        @Html.DropDownListFor(model => model.SelectedRequestMethod, Model.RequestMethodDropdown, new { @class = "form-control edit-dataset-row", })
                        @Html.ValidationMessageFor(model => model.SelectedRequestMethod, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="httpPostPanel" style="display:none;">
                    <div class="form-group col-md-12">
                        @Html.LabelFor(model => model.SelectedRequestDataFormat, htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.DropDownListFor(model => model.SelectedRequestDataFormat, Model.RequestDataFormatDropdown, new { @class = "form-control edit-dataset-row", })
                            @Html.ValidationMessageFor(model => model.SelectedRequestDataFormat, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="form-group col-md-12">
                        @Html.LabelFor(model => model.HttpRequestBody, htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.HttpRequestBody, new { rows = "15", cols = "132", htmlAttributes = new { @class = "form-control edit-dataset-row,", @placeholder = "JSON format" } })
                            @Html.ValidationMessageFor(model => model.HttpRequestBody, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="form-group col-md-12">
                        <div class="col-md-offset-2 col-md-2">
                            <input type="button" id="jsonPreview" value="Validate Body" class="btn btn-primary" />
                        </div>
                    </div>
                    <div class="jsonValidateResultsPanel form-group col-md-12" style="display:none;">
                        <div class="col-md-offset-2 col-md-10">
                            <pre id="json-viewer"></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="jobquestion ftpPattern">
            <div class="form-group col-md-12">
                @Html.LabelFor((model) => model.FtpPattern, new { @class = "control-label col-md-2" })
                <div class="col-md-3">
                    @Html.DropDownListFor((model) => model.FtpPattern, Model.FtpPatternDropDown, new { @class = "form-control edit-dataset-row" })
                    @Html.ValidationMessageFor((model) => model.FtpPattern, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>


        <div class="jobquestion searchCriteria">
            <div class="form-group configQuestion">
                <div class="col-md-12">
                    <hr />
                    <h5>Should selective files be processed?</h5>
                </div>
            </div>

            <div class="form-group questionDescription">
                <div class="col-md-12">
                    <span class="text-muted">
                        <em>All searches are performed on full file name (including file extension).&nbsp;&nbsp;</em>
                        <em>A regular expression search of \. is the least restrictive and will match anything with a period.</em>
                    </span>
                </div>
            </div>

            <div class="searchCriteria searchCriteriaIsRegex">
                <div class="form-group col-md-12">
                    @Html.LabelFor(model => model.IsRegexSearch, htmlAttributes: new { @class = "control-label col-md-2 optional" })
                    <div class="col-md-10">
                        @Html.CheckBoxFor(model => model.IsRegexSearch, new { @class = "" })
                        @Html.ValidationMessageFor(model => model.IsRegexSearch, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>

            <div class="form-group fieldDescription">
                <label class="control-label col-md-2"></label>
                <div class="col-md-10">
                    <span class="text-muted">
                        <em> Not familiar with <a target="_blank" href="https://regexr.com/">Regex Expressions?</a></em>
                    </span>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.SearchCriteria, htmlAttributes: new { @class = "control-label col-md-2 optional" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.SearchCriteria, new { htmlAttributes = new { @class = "form-control edit-dataset-row" } })
                    @Html.ValidationMessageFor(model => model.SearchCriteria, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>

        <div class="jobquestion targetFileName">
            <div class="form-group configQuestion">
                <div class="col-md-12">
                    <hr />
                    <h5 id="targetfilenamequestion"></h5>
                </div>
            </div>

            <div class="form-group questionDescription">
                <div class="col-md-12">
                    <span class="text-muted">
                        <em id="targetfilenamedesc"></em>
                    </span>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.TargetFileName, htmlAttributes: new { @class = "control-label col-md-2 optional", @id = "targetfilenamelabel" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.TargetFileName, new { htmlAttributes = new { @class = "form-control edit-dataset-row,", @placeholder = "Exclude file extension" } })
                    @Html.ValidationMessageFor(model => model.TargetFileName, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>


        @Html.HiddenFor(model => model.Schedule)

        <div class="jobquestion schedule">
            <div id="schedulePanel" style="display:none">
                <div class="form-group configQuestion">
                    <div class="col-md-12">
                        <h5>How often would you like us to pull the data?</h5>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    @Html.LabelFor(model => model.SchedulePicker, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-2">
                        @Html.DropDownListFor(model => model.SchedulePicker, Model.SchedulePickerDropdown, new { @class = "form-control edit-dataset-row" })
                        @Html.ValidationMessageFor(model => model.SchedulePicker, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group scheduler col-md-12" id="hourlyPicker">
                    <label class="control-label col-md-2">Every Hour at</label>
                    <div class="col-md-10">
                        <input id="cronHourlyTimePicker" type="number" max="59" min="0" class="form-control" style="width:10%;" placeholder="Minute" />
                    </div>
                </div>

                <div class="form-group scheduler col-md-12" id="dailyPicker">
                    <label class="control-label col-md-2">Every Day at</label>
                    <div class="col-md-10">
                        <input class="timepicker timepicker-with-dropdown text-center form-control edit-dataset-row col-md-4" id="cronDailyJobTimePicker" style="width:15%;" />
                        <div class="col-md-2">
                            <span>CST</span>
                        </div>
                    </div>
                </div>

                <div class="form-group scheduler col-md-12" id="weeklyPicker">
                    <label class="control-label col-md-2">Every Week on</label>
                    <div class="col-md-10">
                        <select id="cronWeeklyDayPicker" class="form-control edit-dataset-row" style="width:25%; display: inline-block;">
                            <option selected disabled>Day of the Week</option>
                            <option value="0">Sunday</option>
                            <option value="1">Monday</option>
                            <option value="2">Tuesday</option>
                            <option value="3">Wednesday</option>
                            <option value="4">Thursday</option>
                            <option value="5">Friday</option>
                            <option value="6">Saturday</option>
                        </select>
                        at
                        <input class="timepicker timepicker-with-dropdown text-center form-control edit-dataset-row" id="cronWeeklyJobTimePicker" style="width:15%; display: inline-block;" />
                        CST
                    </div>
                </div>

                <div class="form-group scheduler col-md-12" id="monthlyPicker">
                    <label class="control-label col-md-2">Every Month on</label>
                    <div class="col-md-10">
                        <input id="cronMonthlyDayPicker" type="number" max="31" min="1" class="form-control" style="width:20%; display: inline-block;" placeholder="Day of the Month" />
                        at
                        <input class="timepicker timepicker-with-dropdown text-center form-control edit-dataset-row" id="cronMonthlyJobTimePicker" style="width:15%; display: inline-block;" />
                        CST
                    </div>
                </div>

                <div class="form-group scheduler col-md-12" id="yearlyPicker">
                    <label class="control-label col-md-2">Every Year on</label>
                    <div class="col-md-10">
                        <select id="cronYearlyMonthPicker" class="form-control edit-dataset-row" style="width:25%; display: inline-block;">
                            <option selected disabled>Month</option>
                            <option value="1">January</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                        <input id="cronYearlyDayPicker" type="number" max="31" min="1" class="form-control" style="width:15%; display: inline-block;" placeholder="Day of the Month" />
                        at
                        <input class="timepicker timepicker-with-dropdown text-center form-control edit-dataset-row" id="cronYearlyJobTimePicker" style="width:15%; display: inline-block;" />
                        CST
                    </div>
                </div>

                <div id="scheduleRow" class="form-group col-md-12" style="display: none;">
                    <label class="control-label col-md-2">The next four scheduled times will be in your local Time</label>
                    <div id="scheduledTimes" class="col-md-10">
                    </div>
                </div>
            </div>
        </div>
    </div>
@*}*@
    