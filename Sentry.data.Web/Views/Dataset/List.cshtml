@model ListDatasetModel

@{
    ViewBag.Title = "Datasets";
}

@*This would be to put the filters in a side menu that is off the page and would be used on smaller screens*@
@*<div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    @using (Html.BeginForm(@"List", "Dataset", FormMethod.Get, new { @class = "navbar-form navbar-center", @id = "DatasetListSearch" }))
    {
        @Html.Partial("_SearchFilters", Model)
    }
</div>*@

<!-- Use any element to open the sidenav -->
@*<span onclick="openNav()">open</span>*@

<div id="main">
    <div class="col-md-3 textCenter">
        <div class="listHeadGroup">
            <img src="~/Images/Icons/DatasetsBlue.svg" class="datasetImg leftFloat" />
            <h1 class="htCenter datasetHeader">Datasets</h1>
        </div>
    </div>

    @{
        using (Html.BeginForm(@"List", "Dataset", FormMethod.Get, new { @class = "navbar-form navbar-center", @id = "DatasetListSearch" }))
        {
            @*<div class="input-group dataset-search" id="DatasetListSearch">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                    <input type="text" id="SearchKeywords" name="searchPhrase" class="form-control" placeholder="Enter dataset search term(s)" value="@{@Request.QueryString["searchPhrase"]}" />
                    <input type="hidden" id="SearchCategory" name="Category" class="form-control" value="@{@Request.QueryString["Category"]}" />
                    @Html.HiddenFor(model => model.SearchCategory)
                </div>*@

            @*<div class="input-group">
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.SearchText, new { htmlAttributes = new { @class = "form-control " } })
                    </div>
                </div>*@

            <div class="col-md-9 textCenter">
                <div class="searchBoxDS">
                    @Html.EditorFor(model => model.SearchText, new { htmlAttributes = new { @class = "form-control searchTextDS", @placeholder = "Search " + Model.DatasetList.Count() + " Datasets" } })
                    <button type="submit" class="btn btn-primary searchBtn"><span class="glyphicon glyphicon-search"></span></button>
                </div>
            </div>

            @*<div class="input-group dataset-search" id="DatasetListSearch2">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                    @Html.TextAreaFor(m => Model.SearchText, new { @class = "form-control", @placeholder = "Enter dataset search term(s)", @id = "SearchKeywords2" })
                    @Html.HiddenFor(model => model.SearchCategory)
                </div>*@
            @*<p> &nbsp; </p>*@

            @* Left sidebar *@
            @*<div class="row">*@
            <div class="col-sm-3 clearFloat no-padding hidden-sm hidden-xs">
                <div class="outsideFilters">
                    @Html.Partial("_SearchFilters", Model)
                </div>
            </div>

            @* Main Content *@
            <div class="col-md-9 textCenter">
                <div id="DatasetItemList" class="dataset-list inlineBlock text-left">
                    <div class="browse-category">
                        <h4 class="found">
                            Found @Model.DatasetList.Count() Dataset(s)...
                        </h4>
                    </div>
                    <ul class="list-unstyled">
                        @{
                            foreach (var item in Model.DatasetList)
                            {
                                @Html.Partial("_ListItem", item)
                            }
                        }
                    </ul>
                </div>
            </div>
            @*</div>*@

        }
    }

    @*PROGRESS BAR MODAL*@
    <div class="modal fade in" id="mod-progress" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    File Progress
                </div>
                <div class="modal-body">
                    <div class="text-center">
                        <div class="i-circle warning"><i class="fa fa-info"></i></div>
                        <div id="result" style="font-size: 1.1em; padding-bottom: 5px">
                            <p id="progressBarParagraph"></p>
                            <p id="progressBarPercentage"></p>
                        </div>
                        <div style="width: 30%; margin: 0 auto; display:none;">
                            <div id="progressbar" style="width: 300px; height: 15px"></div>
                            <br />
                        </div>
                        <div id="ProgressStripe" class="progress progress-striped active" style="position:relative; top:10px; width:100%;">
                            <div id="ProgressMessage" class="progress-bar progress-bar-info" style="width: 100%; border:none;"></div>
                        </div>
                        <br />
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</div>

@section Scripts {
    <script>
        $(function () {
            data.Dataset.ListInit();

            $("[id^=btnApply_]").click(function (e) {
                var $btn = $("[id^=btnApply_]")
                $btn.attr('hidden', 'hidden')

            });
            
           
        });

        //JS for using the navbar that is off the window
        ///* Set the width of the side navigation to 250px and the left margin of the page content to 250px */
        //function openNav() {
        //    document.getElementById("mySidenav").style.width = "250px";
        //    document.getElementById("main").style.marginLeft = "250px";
        //}

        ///* Set the width of the side navigation to 0 and the left margin of the page content to 0 */
        //function closeNav() {
        //    document.getElementById("mySidenav").style.width = "0";
        //    document.getElementById("main").style.marginLeft = "0";
        //}
    </script>
}
