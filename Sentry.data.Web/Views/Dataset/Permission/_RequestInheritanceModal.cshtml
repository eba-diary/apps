@model Sentry.data.Web.RequestPermissionInheritanceModel
@{
    ViewData.TemplateInfo.HtmlFieldPrefix = "Inheritance";
}

@using (Html.BeginForm("SubmitInheritanceRequest", "Dataset", FormMethod.Post, new { @id = "InheritanceRequestForm" }))
{
    <div class="modal fade" id="inheritanceModal" tabindex="-1" role="dialog" aria-labelledby="inheritanceModalTitle"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="inheritanceModalTitle">Manage Inheritance from @Model.SaidKeyCode</h4><em class="icon-info-solid dsc-blue-text" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Permission inheritance allows a dataset to 'inherit' permissions from the owning SAID asset. A user with consume access to a SAID asset would be able to query inheritance-enabled datasets under that asset."></em>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div id="InheritanceLoading" class="d-none text-center">
                    <div class="preloader-wrapper big active">
                        <div class="spinner-layer spinner-blue-only">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div>
                            <div class="gap-patch">
                                <div class="circle"></div>
                            </div>
                            <div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="InheritanceModalBody" class="modal-body pt-0">
                    <h6 class="pt-3" id="addRemoveInheritanceMessage"></h6>
                    <div class="alert alert-danger d-none" id="inheritanceValidationMessage" role="alert">
                        Business Reason and Approver are required.
                    </div>
                    @Html.HiddenFor(model => model.IsAddingPermission)
                    @Html.HiddenFor(model => model.SelectedPermissions)
                    @Html.HiddenFor(model => model.SecurableObjectId)
                    @Html.HiddenFor(model => model.SaidKeyCode)
                    @Html.HiddenFor(model => model.TicketId)
                    <div class="md-form">
                        @Html.TextBoxFor(model => model.DatasetName, new { @disabled = "disabled", @class = "form-control", @readonly = "readonly" })
                        <label for="SecurableObjectName" class="active">Dataset</label>
                    </div>
                    <div class="md-form">
                        @Html.LabelFor(model => model.BusinessReason, new { @class = "disabled" })
                        @Html.TextAreaFor(model => model.BusinessReason, new { @class = "md-textarea w-100" })
                    </div>
                    <div class="md-form">
                        @Html.LabelFor((model) => model.SelectedApprover, new { @class = "mdb-main-label" })
                        @Html.DropDownListFor((model) => model.SelectedApprover, Model.AllApprovers, new { @class = "mdb-select" })
                    </div>
                </div>
                <div class="modal-footer" id="InheritanceModalFooter">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="inheritanceModalSubmit">Create Ticket</button>
                </div>
            </div>
        </div>
    </div>
}